
<!DOCTYPE html>
<html class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="shortcut icon" href="../../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.1, mkdocs-material-1.2.0">
    
    
      
        <title>Async GUI - c4ddev Documentation</title>
      
    
    
      <script src="../../assets/javascripts/modernizr-56ade86843.js"></script>
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application-e17eeafcbc.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
  
  
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href="../.." title="c4ddev Documentation" class="md-icon md-icon--home md-header-nav__button">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  Python Information
                </span>
              
            
            Async GUI
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search">
  <div class="md-search__overlay"></div>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" accesskey="s" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result"></div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <div class="md-header-nav__source">
          
        </div>
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-icon md-icon--home md-nav__button"></i>
    
    c4ddev Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../changelog/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Plugins
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Plugins
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/c4dide/" title="C4D IDE" class="md-nav__link">
      C4D IDE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/pyobject/" title="PyObject" class="md-nav__link">
      PyObject
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/pyshader/" title="PyShader" class="md-nav__link">
      PyShader
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../plugins/uescapetool/" title="Unicode Escape Tool" class="md-nav__link">
      Unicode Escape Tool
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Command-line Interface
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Command-line Interface
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cli/_install/" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cli/build-loader/" title="build-loader" class="md-nav__link">
      build-loader
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cli/pip-get/" title="pip-get" class="md-nav__link">
      pip-get
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cli/pip/" title="pip" class="md-nav__link">
      pip
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cli/pypkg/" title="pypkg" class="md-nav__link">
      pypkg
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cli/rpkg/" title="rpkg" class="md-nav__link">
      rpkg
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cli/symbols/" title="symbols" class="md-nav__link">
      symbols
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../localimport/" title="Localimport" class="md-nav__link">
      Localimport
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../api/" title="Scripting API" class="md-nav__link">
      Scripting API
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      C++ Information
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        C++ Information
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cpp/resources/" title="Resources" class="md-nav__link">
      Resources
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cpp/snippets/" title="Snippets" class="md-nav__link">
      Snippets
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8" checked>
    
    <label class="md-nav__link" for="nav-8">
      Python Information
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Python Information
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
    <a href="./" title="Async GUI" class="md-nav__link md-nav__link--active">
      Async GUI
    </a>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../scripts/" title="Scripts & Snippets" class="md-nav__link">
      Scripts & Snippets
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
               
              
                
                <h1 id="async-gui">Async GUI</h1>
<p>Just like in many other GUI frameworks and applications, you can not operate
with the GUI layer from any but the main thread in Cinema 4D. If you do
processing in a separate thread and need to update some progress bar in your
dialog, you have to use the message queue in Cinema 4D, via <code>c4d.EventAdd()</code>
or <code>c4d.SpecialEventAdd()</code>.</p>
<p>The <a href="https://niklasrosenstein.github.io/py-nr/concurrency/"><code>nr.concurrency</code></a> module provides a lot of utility to work with
background procedures inside of (but not limited to) Cinema 4D. It provides a
<code>Synchronizable</code> base-class,an event-notification system, futures and more!</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Be sure to read the information on <a href="../../localimport">Third Party Modules</a> first.</p>
</div>
<div class="codehilite"><pre><span></span><span class="k">with</span> <span class="n">localimport</span><span class="p">(</span><span class="s1">&#39;res/modules&#39;</span><span class="p">):</span>
  <span class="kn">from</span> <span class="nn">nr</span> <span class="kn">import</span> <span class="n">concurrency</span>

<span class="n">events</span> <span class="o">=</span> <span class="n">concurrency</span><span class="o">.</span><span class="n">EventQueue</span><span class="p">()</span>
<span class="c1"># Allow dispose of old events of the same type, so we don&#39;t get to process</span>
<span class="c1"># multiple events of the same type with different data, but only the most recent.</span>
<span class="n">events</span><span class="o">.</span><span class="n">new_event_type</span><span class="p">(</span><span class="s1">&#39;progress-update&#39;</span><span class="p">,</span> <span class="n">mergable</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">events</span><span class="o">.</span><span class="n">new_event_type</span><span class="p">(</span><span class="s1">&#39;status-update&#39;</span><span class="p">,</span> <span class="n">mergable</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">MyDialog</span><span class="p">(</span><span class="n">c4d</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">GeDialog</span><span class="p">):</span>

  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">MyDialog</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>

  <span class="k">def</span> <span class="nf">on_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="c1"># Called from the main thread!</span>
    <span class="k">if</span> <span class="n">event</span> <span class="o">==</span> <span class="s1">&#39;progress-update&#39;</span><span class="p">:</span>
      <span class="k">pass</span>
    <span class="k">elif</span> <span class="n">event</span> <span class="o">==</span> <span class="s1">&#39;status-update&#39;</span><span class="p">:</span>
      <span class="k">pass</span>

  <span class="k">def</span> <span class="nf">CoreMessage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg_type</span><span class="p">,</span> <span class="n">bc</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">msg_type</span> <span class="o">==</span> <span class="n">c4d</span><span class="o">.</span><span class="n">EVMSG_CHANGE</span><span class="p">:</span>
      <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">events</span><span class="o">.</span><span class="n">pop_events</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">on_event</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">MyDialog</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">CoreMessage</span><span class="p">(</span><span class="n">msg_type</span><span class="p">,</span> <span class="n">bc</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">some_function_from_a_thread</span><span class="p">():</span>
  <span class="c1"># ...</span>
  <span class="n">events</span><span class="o">.</span><span class="n">add_event</span><span class="p">(</span><span class="s1">&#39;progress-update&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;progress&#39;</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">})</span>
</pre></div>
              
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../cpp/snippets/" title="Snippets" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Snippets
              </span>
            </div>
          </a>
        
        
          <a href="../scripts/" title="Scripts & Snippets" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Scripts & Snippets
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application-30ac6a1727.js"></script>
      <script>app.initialize({url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>